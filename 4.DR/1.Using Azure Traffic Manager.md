- create new
	- routing method should be 'priority'![[Pasted image 20230518182731.png]]
	- change probing interval & tolerated # of failures (every 10 secs & 1 failure)![[Pasted image 20230518182956.png]]
- implement DR on inventory app service as it uses port 80 which is supported by traffic manager, other ports would be complicated to setup
	- set endpoint![[Pasted image 20230518183214.png]]
	- disable app service authentication, as in order for traffic manager to work with the authentication, we will have to enable custom domain which would make it more complicated. So for the sake of simplicity we disable it![[Pasted image 20230518183653.png]]
	- test that it works without authentication![[Pasted image 20230518183812.png]]
	- will have to change the free tier to standard, as traffic manager doesnt support free tier![[Pasted image 20230518184027.png]]
	- lets check the traffic manager
		-  ``http://readit.trafficmanager.net``
		- it means traffic is being routed via traffic manager
		- ![[Pasted image 20230518184315.png]]
	- to test DR of inventory app, we will have to create a secondary app to switch over to in case of disaster
		- create new, make sure in the UK West region![[Pasted image 20230518185039.png]]
		- test the app, it should be a generic app which is what we need for testing![[Pasted image 20230518185334.png]]
		- add this new app as an endpoint in traffic manager, should have a priority of 2![[Pasted image 20230518185511.png]]
		- ![[Pasted image 20230518185520.png]]
	- Time to test
		- check ``http://readit.trafficmanager.net/``
		- it shows primary app![[Pasted image 20230518185716.png]]
		- stop the primary app![[Pasted image 20230518190018.png]]
		- try again
		- it shows secondary app which means traffic manager automatically switched it to secondary![[Pasted image 20230518190055.png]]
		- start the primary app![[Pasted image 20230518190249.png]]
		- switches back to the primary app![[Pasted image 20230518190219.png]]
		- 